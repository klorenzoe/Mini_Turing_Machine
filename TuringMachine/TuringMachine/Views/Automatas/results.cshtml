<div>
    <br />
    <h3>@ViewBag.Title</h3>
    <button type="button" class="btn btn-primary pull-right" id="btnPalindrome">
        <span class="glyphicon glyphicon-ok" style="color:white"> Analizar </span>
    </button>
    <input type="text" placeholder="@ViewBag.Example" id="txtPalindrome" class="form-control col-lg-12" style="margin: 0px 863px 0px 0px; width: 276px; height: 34px; resize: none;" /> 
    @*@Html.TextBox("Text", new { @class = "form-control col-lg-12", @placeholder = @ViewBag.Example, @style = "margin: 0px 863px 0px 0px; width: 276px; height: 34px; resize: none;", @id="txtPalindrome" })*@ 
</div>

<br />
<div id="response"></div>

<div class="jumbotron" id="jbmPalindromes"></div>

<div class="pull-right" id="divMovementsCount"></div>

<br />

<script type="text/javascript">
    $(document).ready(function () {

        var i = 0;
        var myInterval;
        $("#btnPalindrome").click(function (e) {
            e.preventDefault();
            if($('#txtPalindrome').val())
            {
                clear();
                $.ajax({
                    type: 'POST',
                    url: "@Url.Action(@ViewBag.Validate, "Automatas")",
                    data: { input: $('#txtPalindrome').val() },
                    success: function (data) {
                        //Alert if the result was true or false
                        if (data.success) {
                            $('#response').addClass("alert alert-success");
                            $('#response').append('<strong>Success!</strong> @ViewBag.SuccessMessage');
                        }
                        else
                        {
                            $('#response').addClass("alert alert-danger");
                            $('#response').append('<strong>Fail!</strong> @ViewBag.FailMessage');
                        }
                        $('#divMovementsCount').append('<strong>Movimientos totales: </strong> '+data.result.length);
                        //return the automata process
                        DrawTable(data);
                  
                }
            });}
        });

        function clear()
        {
            $("#response").removeClass("alert alert-success");
            $("#response").removeClass("alert alert-danger");
            $("#response").empty();
            $("table[name^=tableResult]").remove();
            $('#divMovementsCount').empty();
        }

        function DrawTable(data)
        {
            myInterval = window.setInterval(function () {
                if (i < data.result.length) {
                    //Borrar el contenido actual
                    $("table[name^=tableResult]").remove();

                    //Dibujar el nuevo contenido
                    var chars = data.result[i].inputChanged.split('');

                    var content = '<table width="400" align="center" name="tableResult"> <tr>';
                    for (k = 0; k < chars.length; k++) {
                        if (k == data.result[i].indexHead)
                        { content += '<td bgcolor = "#58CCB6" align="center">' + '' + chars[k] + '' + '</td>'; }
                        else
                        { content += '<td align="center">' + '' + chars[k] + '' + '</td>'; }
                    }
                    content += "</tr></table>";


                    $('#jbmPalindromes').append(content);
                    i++;
                } else
                {
                    clearInterval(myInterval);
                    i = 0;
                }


            },500);
        }
        });
</script>